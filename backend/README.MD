# DecoMotivo - Backend API

API REST para el e-commerce de productos decorativos personalizados en madera.

## ğŸš€ InstalaciÃ³n RÃ¡pida

```bash
# Instalar dependencias
npm install

# Configurar variables de entorno
cp .env.example .env
# Editar .env con tus credenciales

# Iniciar servidor (desarrollo)
npm run dev

# Iniciar servidor (producciÃ³n)
npm start
```

## ğŸ”§ Variables de Entorno

```
PORT=3000
NODE_ENV=development

DB_HOST=localhost
DB_USER=root
DB_PASSWORD=tu_password
DB_NAME=decomotivo_dev
DB_PORT=3306

CLOUDINARY_CLOUD_NAME=dkjqmhwtj
CLOUDINARY_API_KEY=tu_api_key
CLOUDINARY_API_SECRET=tu_api_secret

JWT_SECRET=tu_secret_key
JWT_EXPIRES_IN=7d

FRONTEND_URL=http://localhost:5173
```

## ğŸ“¡ Endpoints

### PÃºblicos

**CategorÃ­as**
- `GET /api/categorias` - Listar categorÃ­as
- `GET /api/categorias/slug/:slug` - CategorÃ­a por slug
- `GET /api/categorias/:id` - CategorÃ­a por ID

**Productos**
- `GET /api/productos` - Listar productos
- `GET /api/productos/slug/:slug` - Producto por slug
- `GET /api/productos/categoria/:id` - Productos por categorÃ­a
- `GET /api/productos/destacados` - Productos destacados
- `GET /api/productos/:id` - Producto por ID

**AutenticaciÃ³n**
- `POST /api/auth/login` - Login admin
- `GET /api/auth/verify` - Verificar token (requiere auth)

### Protegidos (requieren autenticaciÃ³n)

**Admin - Productos**
- `POST /api/admin/productos` - Crear producto
- `PUT /api/admin/productos/:id` - Editar producto
- `DELETE /api/admin/productos/:id` - Eliminar producto
- `POST /api/admin/productos/:id/imagenes` - Subir imagen
- `DELETE /api/admin/productos/:id/imagenes/:imgId` - Eliminar imagen

**Headers requeridos:**
```
Authorization: Bearer {token}
```

## ğŸ”‘ Login

**Request:**
```json
POST /api/auth/login
{
  "email": "admin@decomotivo.com.ar",
  "password": "tu_password"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": { ... }
  }
}
```

## ğŸ“¸ Upload de ImÃ¡genes

**Request:**
```
POST /api/admin/productos/:id/imagenes
Content-Type: multipart/form-data

imagen: [archivo]
es_principal: true/false
alt_text: "DescripciÃ³n"
```

Las imÃ¡genes se suben automÃ¡ticamente a Cloudinary.

## ğŸ› ï¸ TecnologÃ­as

- Node.js v22.16.0
- Express 4.18.2
- MySQL 8.0.44
- Cloudinary 1.41.3
- JWT para autenticaciÃ³n
- Bcrypt para passwords
- Multer para uploads

## ğŸ“‚ Estructura

```
backend/
â”œâ”€â”€ config/          # Configuraciones (DB, Cloudinary)
â”œâ”€â”€ controllers/     # LÃ³gica de negocio
â”œâ”€â”€ middleware/      # Auth, upload
â”œâ”€â”€ routes/          # DefiniciÃ³n de rutas
â”œâ”€â”€ scripts/         # Utilidades (hashPassword)
â””â”€â”€ server.js        # Entry point
```

## ğŸ—„ï¸ Base de Datos

**Tablas:**
- usuarios - Administradores
- categorias - CategorÃ­as de productos
- productos - Productos
- imagenes_productos - ImÃ¡genes asociadas
- movimientos_stock - Historial de stock

**Crear BD:**
```sql
CREATE DATABASE decomotivo_dev CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

Ejecutar el schema SQL desde MySQL Workbench.

## ğŸ“ Notas

- Todos los productos eliminados son soft delete (activo = false)
- Las imÃ¡genes se redimensionan automÃ¡ticamente en Cloudinary
- Los tokens JWT expiran en 7 dÃ­as
- Control de stock es opcional por producto

---

Desarrollado para DecoMotivo - TucumÃ¡n, Argentina ğŸ‡¦ğŸ‡·